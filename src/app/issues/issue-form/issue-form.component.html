<p-menubar [model]="items"></p-menubar>

<div class="ui-g" [formGroup]="issueForm">
  <div class="ui-g-6">
    <div class="ui-g-12">
      <div class="ui-g-4">Company<span class="fa fa-asterisk"></span></div>
      <div class="ui-g-8">
        <p-dropdown class="ui-g-12"
                    [options]="companies"
                    [filter]="true"
                    [required]="true"
                    [(ngModel)]="selectedCompany"
                    [style]="{'width': '100%'}"
                    (onChange)="getUsers($event)"
                    formControlName="companyId"
        ></p-dropdown>
      </div>
    </div>
    <div class="ui-g-12">
      <div class="ui-g-4">User Email<span class="fa fa-asterisk"></span></div>
      <div class="ui-g-8">
        <div>
          <p-multiSelect class="ui-g-12"
                         [options]="users"
                         [filter]="true"
                         [style]="{'width': '100%'}"
                         placeholder="Select users"
                         formControlName="usersId"
          ></p-multiSelect>
        </div>
      </div>
    </div>
    <div class="ui-g-12">
      <div class="ui-g-4">Completion Flag<span class="fa fa-asterisk"></span></div>
      <div class="ui-g-8">
        <p-dropdown class="ui-g-12"
                    [options]="completionFlags"
                    [filter]="true"
                    [required]="true"
                    [style]="{'width': '100%'}"
                    formControlName="completionFlag"
        ></p-dropdown>
      </div>
    </div>
    <div class="ui-g-12">
      <div class="ui-g-4">Category<span class="fa fa-asterisk"></span></div>
      <div class="ui-g-8">
        <p-dropdown class="ui-g-12"
                    [options]="categories"
                    [filter]="true"
                    [required]="true"
                    [style]="{'width': '100%'}"
                    formControlName="categoryId"
                    (onChange)="CategoryChange($event)"
        ></p-dropdown>
      </div>
    </div>
    <div class="ui-g-12" [hidden]="hideTags" #tagEl>
      <div class="ui-g-4">Tags<span class="fa fa-asterisk"></span></div>
      <div class="ui-g-8">
        <p-multiSelect class="ui-g-12"
                       [options]="tags"
                       [filter]="true"
                       [style]="{'width': '100%'}"
        ></p-multiSelect>
      </div>
    </div>
    <div class="ui-g-12">
      <div class="ui-g-4">Description<span class="fa fa-asterisk"></span></div>
      <br>
      <br>
      <div #description>

      </div>
    </div>
    <div class="ui-g-12" >
      <div class="ui-g-4">Upload related files</div>
      <br>
      <br>
      <p-fileUpload
        #relatedFiles
        [showUploadButton]="false"
        customUpload = true
        (uploadHandler)="uploadBlob($event)">
        name="relevantFiles[]"
       >
      </p-fileUpload>
      <ul class="list-group">

      </ul>
    </div>

  </div>
  <div class="ui-g-6">
    <div class="ui-g-12">
      <div class="ui-g-4">Assigned User<span class="fa fa-asterisk"></span></div>
      <div class="ui-g-8">
        <p-dropdown class="ui-g-12"
                    [options]="psUsers"
                    [filter]="true"
                    [required]="true"
                    [style]="{'width': '100%'}"
                    formControlName="psUser"
        ></p-dropdown>
      </div>
    </div>
    <div class="ui-g-12">
      <div class="ui-g-4">Application<span class="fa fa-asterisk"></span></div>
      <div class="ui-g-8">
        <p-multiSelect class="ui-g-12"
                       [options]="pslApplications"
                       [filter]="true"
                       [style]="{'width': '100%'}"
                       formControlName="applications"
        ></p-multiSelect>
      </div>
    </div>
    <div class="ui-g-12">
      <div class="ui-g-4">Urgency State<span class="fa fa-asterisk"></span></div>
      <div class="ui-g-8">
        <p-dropdown class="ui-g-12"
                    [options]="urgnecyFlags"
                    [filter]="true"
                    [required]="true"
                    [style]="{'width': '100%'}"
                    formControlName="urgencyState"
        ></p-dropdown>
      </div>
    </div>
    <div class="ui-g-12">
      <div class="ui-g-4">Stock Responses<span class="fa fa-asterisk"></span></div>
      <div class="ui-g-8">
        <p-dropdown class="ui-g-12"
                    [options]="stockResponses"
                    [filter]="true"
                    [required]="true"
                    [style]="{'width': '100%'}"
                    placeholder="Select a stock response"
                    (onChange)="stockResponseCheck($event)"

        ></p-dropdown>
      </div>
    </div>
    <div class="ui-g-12" [hidden]="hideTags" [style.height.px]="tagsHeight">

    </div>
    <div class="ui-g-12">
      <div class="ui-g-4">Solution<span class="fa fa-asterisk"></span></div>
      <br>
      <br>
      <div #solution>

      </div>
    </div>
    <div class="ui-g-12">
      <div class="ui-g-4">Email attachments</div>
      <br>
      <br>
      <p-fileUpload #emailAttachments
                    name="attachments[]"
                    customUpload="true"
                    multiple='multiple'
                    [showUploadButton]="false"
                    (uploadHandler)="attachFiles($event)">
      </p-fileUpload>
    </div>
  </div>
  <button (click)="submitForm()" class="btn btn-primary">Submit</button>
</div>
